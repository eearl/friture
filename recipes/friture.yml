# AppImage recipe

app: friture

ingredients:
  dist: trusty
  sources: 
    - deb http://us.archive.ubuntu.com/ubuntu/ trusty trusty-updates trusty-security main universe
    - deb http://us.archive.ubuntu.com/ubuntu/ trusty-updates main universe
    - deb http://us.archive.ubuntu.com/ubuntu/ trusty-security main universe
  packages:
    - python3.5-venv

script:
  - virtualenv --python=python3 usr
  - ./usr/bin/pip3 install -r requirements.txt
  - ./usr/bin/python3 setup.py build_ext --inplace
  - cat > usr/share/applications/mu.codewith.editor.desktop <<\EOF
  - [Desktop Entry]
  - Type=Application
  - Name=Friture
  - Comment=Real-time visualization of live audio data
  - Icon=friture
  - Exec=python3 main.py
  - Terminal=false
  - Categories=AudioVideo;Audio;
  - Keywords=audio;spectrum;spectrogram;
  - MimeType=
  - EOF
  - cp usr/share/applications/friture.desktop .
  - usr/bin/python3 -c "import friture; print(friture.__version__)" >> ../VERSION
